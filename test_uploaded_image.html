<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Uploaded Image</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .test-image { max-width: 400px; border: 2px solid #ddd; margin: 20px 0; }
        .result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Test Uploaded Image Access</h1>
    
    <h2>Direct Image Test</h2>
    <p>Testing direct access to uploaded image:</p>
    <img src="/storage/products/vMqAyMS45zr6IR9WLeoAFTx62ImFkhLQEol8m3kK.png" 
         alt="Uploaded Image" 
         class="test-image"
         onload="showResult('direct', true)"
         onerror="showResult('direct', false)">
    <div id="direct-result" class="result"></div>
    
    <h2>Absolute URL Test</h2>
    <p>Testing absolute URL access:</p>
    <img src="http://127.0.0.1:8000/storage/products/vMqAyMS45zr6IR9WLeoAFTx62ImFkhLQEol8m3kK.png" 
         alt="Uploaded Image Absolute" 
         class="test-image"
         onload="showResult('absolute', true)"
         onerror="showResult('absolute', false)">
    <div id="absolute-result" class="result"></div>
    
    <h2>API Test</h2>
    <p>Testing image URL from API:</p>
    <div id="api-test"></div>
    
    <script>
        function showResult(type, success) {
            const resultDiv = document.getElementById(type + '-result');
            if (success) {
                resultDiv.className = 'result success';
                resultDiv.textContent = '✅ Image loaded successfully!';
            } else {
                resultDiv.className = 'result error';
                resultDiv.textContent = '❌ Image failed to load';
            }
        }
        
        // Test API
        fetch('/api/products/featured')
            .then(response => response.json())
            .then(data => {
                const apiDiv = document.getElementById('api-test');
                const bishopProduct = data.find(p => p.name === 'Bishop');
                
                if (bishopProduct) {
                    apiDiv.innerHTML = `
                        <p>Bishop product found in API:</p>
                        <p><strong>Image URL:</strong> ${bishopProduct.primary_image}</p>
                        <img src="${bishopProduct.primary_image}" 
                             alt="Bishop from API" 
                             class="test-image"
                             onload="showResult('api', true)"
                             onerror="showResult('api', false)">
                        <div id="api-result" class="result"></div>
                    `;
                } else {
                    apiDiv.innerHTML = '<p class="result error">❌ Bishop product not found in API</p>';
                }
            })
            .catch(error => {
                document.getElementById('api-test').innerHTML = 
                    `<p class="result error">❌ API Error: ${error.message}</p>`;
            });
    </script>
</body>
</html>