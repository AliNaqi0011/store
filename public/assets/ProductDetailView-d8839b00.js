import{_ as g,u as x,k as f,r as _,o as l,c as a,b as s,t as r,F as h,h as y,l as u,d as m,f as b,e as v,w,m as k}from"./index-2221eb74.js";const P={name:"ProductDetailView",data(){return{product:null,loading:!0}},setup(){const t=x(),e=f();return{productStore:t,cartStore:e}},async created(){await this.loadProduct()},methods:{async loadProduct(){var t,e,i;this.loading=!0;try{this.product=await this.productStore.fetchProduct(this.$route.params.slug),console.log("Product detail loaded:",this.product),console.log("Product primary_image:",(t=this.product)==null?void 0:t.primary_image),console.log("Product in_stock:",(e=this.product)==null?void 0:e.in_stock),console.log("Product stock_quantity:",(i=this.product)==null?void 0:i.stock_quantity)}catch(d){console.error("Error loading product:",d)}finally{this.loading=!1}},getImageUrl(t){if(console.log("ProductDetail getImageUrl called with:",t==null?void 0:t.name,t==null?void 0:t.primary_image),t&&t.primary_image&&t.primary_image!==null&&t.primary_image!==""){if(t.primary_image.startsWith("/storage/")){const i=`http://127.0.0.1:8000${t.primary_image}`;return console.log("ProductDetail converting to absolute URL:",i),i}return console.log("ProductDetail using direct URL:",t.primary_image),t.primary_image}const e=`https://dummyimage.com/600x600/4f46e5/ffffff&text=${encodeURIComponent((t==null?void 0:t.name)||"Product")}`;return console.log("ProductDetail using fallback URL:",e),e},handleImageError(t){const e=`https://dummyimage.com/600x600/4f46e5/ffffff&text=${encodeURIComponent(this.product.name)}`;t.target.src.includes("dummyimage.com")||(t.target.src=e)},async addToCart(){try{await this.cartStore.addItem(this.product.id)}catch(t){console.error("Error adding to cart:",t)}}}},C={class:"min-h-screen bg-gray-50"},S={class:"max-w-7xl mx-auto px-4 py-8"},U={key:0,class:"flex justify-center py-16"},I={key:1,class:"bg-white rounded-2xl shadow-lg overflow-hidden"},E={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 p-8"},D={class:"space-y-4"},V={class:"aspect-square bg-gray-100 rounded-xl overflow-hidden"},R=["src","alt"],F={class:"space-y-6"},N={class:"text-3xl font-bold text-gray-900 mb-2"},T={class:"text-gray-600"},B={class:"flex items-center space-x-4"},L={class:"flex text-yellow-400"},q={class:"text-gray-600"},j={class:"flex items-center space-x-4"},M={class:"text-4xl font-bold text-gray-900"},O={key:0,class:"text-2xl text-gray-500 line-through"},z={key:1,class:"px-3 py-1 bg-red-100 text-red-800 text-sm font-bold rounded-full"},A={class:"prose max-w-none"},W={class:"flex items-center space-x-4"},G=["disabled"],H={key:2,class:"text-center py-16"};function J(t,e,i,d,o,c){const p=_("router-link");return l(),a("div",C,[s("div",S,[o.loading?(l(),a("div",U,[...e[2]||(e[2]=[s("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"},null,-1)])])):o.product?(l(),a("div",I,[s("div",E,[s("div",D,[s("div",V,[s("img",{src:c.getImageUrl(o.product),alt:o.product.name,onError:e[0]||(e[0]=(...n)=>c.handleImageError&&c.handleImageError(...n)),class:"w-full h-full object-cover"},null,40,R)])]),s("div",F,[s("div",null,[s("h1",N,r(o.product.name),1),s("p",T,r(o.product.short_description),1)]),s("div",B,[s("div",L,[(l(),a(h,null,y(5,n=>s("i",{key:n,class:k(["fas fa-star",n<=Math.floor(o.product.rating||4.5)?"text-yellow-400":"text-gray-300"])},null,2)),64))]),s("span",q,"("+r(o.product.reviews_count||0)+" reviews)",1)]),s("div",j,[s("span",M,"$"+r(o.product.price),1),o.product.compare_price?(l(),a("span",O,"$"+r(o.product.compare_price),1)):u("",!0),o.product.compare_price?(l(),a("span",z,r(Math.round((o.product.compare_price-o.product.price)/o.product.compare_price*100))+"% OFF ",1)):u("",!0)]),s("div",A,[s("p",null,r(o.product.description),1)]),s("div",W,[s("button",{onClick:e[1]||(e[1]=(...n)=>c.addToCart&&c.addToCart(...n)),disabled:!o.product.in_stock,class:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-8 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105"},[e[3]||(e[3]=s("i",{class:"fas fa-cart-plus mr-2"},null,-1)),m(" "+r(o.product.in_stock?"Add to Cart":"Out of Stock"),1)],8,G),e[4]||(e[4]=s("button",{class:"p-4 border-2 border-gray-200 rounded-xl hover:border-red-300 hover:text-red-500 transition-colors"},[s("i",{class:"fas fa-heart text-xl"})],-1))]),e[5]||(e[5]=b('<div class="grid grid-cols-3 gap-4 pt-6 border-t"><div class="text-center"><i class="fas fa-shipping-fast text-2xl text-blue-600 mb-2"></i><p class="text-sm font-medium">Free Shipping</p></div><div class="text-center"><i class="fas fa-undo text-2xl text-green-600 mb-2"></i><p class="text-sm font-medium">Easy Returns</p></div><div class="text-center"><i class="fas fa-shield-alt text-2xl text-purple-600 mb-2"></i><p class="text-sm font-medium">Secure Payment</p></div></div>',1))])])])):(l(),a("div",H,[e[7]||(e[7]=s("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Product not found",-1)),e[8]||(e[8]=s("p",{class:"text-gray-600 mb-6"},"The product you're looking for doesn't exist.",-1)),v(p,{to:"/products",class:"px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors"},{default:w(()=>[...e[6]||(e[6]=[m(" Browse Products ",-1)])]),_:1})]))])])}const Q=g(P,[["render",J]]);export{Q as default};
