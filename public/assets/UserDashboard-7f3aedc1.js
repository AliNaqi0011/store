import{_ as I,q as L,C as p,r as z,o as d,c as i,b as e,t as l,m as u,D as R,i as E,v as W,l as a,e as q,w as B,F as b,h as g,d as m}from"./index-2221eb74.js";import{u as H}from"./orders-9f5f7292.js";const Q={name:"UserDashboard",data(){return{activeTab:"profile",profileForm:{name:"",email:""},orders:[],wishlist:[],loading:!1,showOrderModal:!1,selectedOrder:null}},setup(){const o=L(),s=H();return{authStore:o,orderStore:s}},async created(){var o,s;this.profileForm.name=((o=this.authStore.user)==null?void 0:o.name)||"",this.profileForm.email=((s=this.authStore.user)==null?void 0:s.email)||"",await this.loadOrders()},methods:{async loadOrders(){if(!this.authStore.isAuthenticated){console.log("User not authenticated");return}this.loading=!0;try{console.log("Loading orders...");const o=await p.get("/orders");console.log("Orders response:",o.data),this.orders=o.data.data||o.data||[],console.log("Orders loaded:",this.orders.length)}catch(o){console.error("Error loading orders:",o),this.orders=[]}finally{this.loading=!1}},updateProfile(){console.log("Updating profile:",this.profileForm)},formatDate(o){return new Date(o).toLocaleDateString()},getStatusClass(o){return{pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[o]||"bg-gray-100 text-gray-800"},removeFromWishlist(o){this.wishlist=this.wishlist.filter(s=>s.id!==o)},async viewOrderDetails(o){try{const s=await p.get(`/orders/${o.order_number}`);this.selectedOrder=s.data.data||s.data,this.showOrderModal=!0}catch(s){console.error("Error fetching order details:",s),alert("Failed to load order details")}},closeOrderModal(){this.showOrderModal=!1,this.selectedOrder=null},async cancelOrder(o){if(confirm(`Are you sure you want to cancel order #${o.order_number}?`))try{await p.post(`/orders/${o.order_number}/cancel`);const s=this.orders.findIndex(f=>f.id===o.id);s!==-1&&(this.orders[s].status="cancelled"),this.selectedOrder&&this.selectedOrder.id===o.id&&(this.selectedOrder.status="cancelled"),alert("Order cancelled successfully!")}catch(s){console.error("Error cancelling order:",s),alert("Failed to cancel order. Please try again.")}}}},Y={class:"min-h-screen bg-gray-50"},G={class:"max-w-7xl mx-auto px-4 py-4 md:py-8"},J={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 md:gap-8"},K={class:"lg:hidden"},X={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4"},Z={class:"flex items-center space-x-3 mb-4"},$={class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center"},ee={class:"text-white font-bold text-sm md:text-lg"},se={class:"font-semibold text-gray-900 text-sm md:text-base"},te={class:"text-xs md:text-sm text-gray-500"},re={class:"flex space-x-2 overflow-x-auto"},le={class:"hidden lg:block lg:col-span-1"},oe={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},de={class:"flex items-center space-x-3 mb-6"},ie={class:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center"},ne={class:"text-white font-bold text-lg"},ae={class:"font-semibold text-gray-900"},ue={class:"text-sm text-gray-500"},ce={class:"space-y-2"},me={class:"lg:col-span-3"},xe={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 md:p-6"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},be={key:1,class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 md:p-6"},ge={key:0,class:"text-center py-12"},fe={key:1,class:"text-center py-12"},ye={key:2,class:"space-y-3 md:space-y-4"},he={class:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 space-y-2 sm:space-y-0"},ve={class:"font-semibold text-gray-900 text-sm md:text-base"},_e={class:"text-xs md:text-sm text-gray-500"},we={class:"text-left sm:text-right"},Oe={class:"font-semibold text-gray-900 text-sm md:text-base"},ke={class:"flex items-center space-x-3 md:space-x-4"},Ce=["onClick"],Se={key:0,class:"text-green-600 hover:text-green-700 text-xs md:text-sm font-medium"},Te={key:2,class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 md:p-6"},De={key:0,class:"text-center py-12"},Fe={key:1,class:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6"},Me=["src","alt"],je={class:"font-semibold text-gray-900 mb-2 text-sm md:text-base"},Pe={class:"text-base md:text-lg font-bold text-blue-600 mb-3 md:mb-4"},Ue={class:"flex space-x-2"},Ae=["onClick"],Ve={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Ne={class:"flex items-center justify-center min-h-screen px-4"},Ee={class:"relative bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto mx-4"},We={class:"sticky top-0 bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between"},qe={key:0,class:"p-4 md:p-6"},Be={class:"mb-6"},Ie={class:"flex items-center justify-between mb-4"},Le={class:"text-lg font-semibold text-gray-900"},ze={class:"text-gray-600"},Re={class:"text-right"},He={class:"text-lg font-bold text-gray-900 mt-1"},Qe={class:"mb-6"},Ye={class:"space-y-3"},Ge=["src","alt"],Je={class:"flex-1"},Ke={class:"font-medium text-gray-900"},Xe={class:"text-sm text-gray-600"},Ze={class:"text-right"},$e={class:"font-semibold text-gray-900"},es={class:"text-sm text-gray-600"},ss={class:"mb-6"},ts={class:"bg-gray-50 p-4 rounded-lg"},rs={class:"font-medium"},ls={key:0},os={class:"mt-2"},ds={class:"mb-6"},is={class:"bg-gray-50 p-4 rounded-lg space-y-2"},ns={class:"flex justify-between"},as={class:"flex justify-between"},us={class:"flex justify-between"},cs={key:0,class:"flex justify-between text-green-600"},ms={class:"border-t pt-2 flex justify-between font-bold text-lg"},xs={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4"},ps={key:1,class:"px-4 md:px-6 py-2 md:py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors text-sm md:text-base"};function bs(o,s,f,c,t,n){var h,v,_,w,O,k,C,S,T,D,F,M,j,P,U,A,V,N;const y=z("router-link");return d(),i("div",Y,[e("div",G,[e("div",J,[e("div",K,[e("div",X,[e("div",Z,[e("div",$,[e("span",ee,l((v=(h=c.authStore.user)==null?void 0:h.name)==null?void 0:v.charAt(0)),1)]),e("div",null,[e("h3",se,l((_=c.authStore.user)==null?void 0:_.name),1),e("p",te,l((w=c.authStore.user)==null?void 0:w.email),1)])]),e("div",re,[e("button",{onClick:s[0]||(s[0]=r=>t.activeTab="profile"),class:u([t.activeTab==="profile"?"bg-blue-50 text-blue-600 border-blue-200":"text-gray-600 hover:bg-gray-50","flex items-center space-x-2 px-3 py-2 rounded-lg border transition-colors whitespace-nowrap text-sm"])},[...s[13]||(s[13]=[e("i",{class:"fas fa-user"},null,-1),e("span",null,"Profile",-1)])],2),e("button",{onClick:s[1]||(s[1]=r=>t.activeTab="orders"),class:u([t.activeTab==="orders"?"bg-blue-50 text-blue-600 border-blue-200":"text-gray-600 hover:bg-gray-50","flex items-center space-x-2 px-3 py-2 rounded-lg border transition-colors whitespace-nowrap text-sm"])},[...s[14]||(s[14]=[e("i",{class:"fas fa-shopping-bag"},null,-1),e("span",null,"Orders",-1)])],2),e("button",{onClick:s[2]||(s[2]=r=>t.activeTab="wishlist"),class:u([t.activeTab==="wishlist"?"bg-blue-50 text-blue-600 border-blue-200":"text-gray-600 hover:bg-gray-50","flex items-center space-x-2 px-3 py-2 rounded-lg border transition-colors whitespace-nowrap text-sm"])},[...s[15]||(s[15]=[e("i",{class:"fas fa-heart"},null,-1),e("span",null,"Wishlist",-1)])],2)])])]),e("div",le,[e("div",oe,[e("div",de,[e("div",ie,[e("span",ne,l((k=(O=c.authStore.user)==null?void 0:O.name)==null?void 0:k.charAt(0)),1)]),e("div",null,[e("h3",ae,l((C=c.authStore.user)==null?void 0:C.name),1),e("p",ue,l((S=c.authStore.user)==null?void 0:S.email),1)])]),e("nav",ce,[e("button",{onClick:s[3]||(s[3]=r=>t.activeTab="profile"),class:u([t.activeTab==="profile"?"bg-blue-50 text-blue-600 border-blue-200":"text-gray-600 hover:bg-gray-50","w-full flex items-center space-x-3 px-4 py-3 rounded-lg border transition-colors"])},[...s[16]||(s[16]=[e("i",{class:"fas fa-user"},null,-1),e("span",null,"Profile",-1)])],2),e("button",{onClick:s[4]||(s[4]=r=>t.activeTab="orders"),class:u([t.activeTab==="orders"?"bg-blue-50 text-blue-600 border-blue-200":"text-gray-600 hover:bg-gray-50","w-full flex items-center space-x-3 px-4 py-3 rounded-lg border transition-colors"])},[...s[17]||(s[17]=[e("i",{class:"fas fa-shopping-bag"},null,-1),e("span",null,"Orders",-1)])],2),e("button",{onClick:s[5]||(s[5]=r=>t.activeTab="wishlist"),class:u([t.activeTab==="wishlist"?"bg-blue-50 text-blue-600 border-blue-200":"text-gray-600 hover:bg-gray-50","w-full flex items-center space-x-3 px-4 py-3 rounded-lg border transition-colors"])},[...s[18]||(s[18]=[e("i",{class:"fas fa-heart"},null,-1),e("span",null,"Wishlist",-1)])],2)])])]),e("div",me,[t.activeTab==="profile"?(d(),i("div",xe,[s[22]||(s[22]=e("h2",{class:"text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6"},"Profile Information",-1)),e("form",{onSubmit:s[8]||(s[8]=R((...r)=>n.updateProfile&&n.updateProfile(...r),["prevent"])),class:"space-y-4 md:space-y-6"},[e("div",pe,[e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),E(e("input",{"onUpdate:modelValue":s[6]||(s[6]=r=>t.profileForm.name=r),type:"text",required:"",class:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"},null,512),[[W,t.profileForm.name]])]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),E(e("input",{"onUpdate:modelValue":s[7]||(s[7]=r=>t.profileForm.email=r),type:"email",required:"",class:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"},null,512),[[W,t.profileForm.email]])])]),s[21]||(s[21]=e("button",{type:"submit",class:"px-4 md:px-6 py-2 md:py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors text-sm md:text-base"}," Update Profile ",-1))],32)])):a("",!0),t.activeTab==="orders"?(d(),i("div",be,[s[28]||(s[28]=e("h2",{class:"text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6"},"Order History",-1)),t.loading?(d(),i("div",ge,[...s[23]||(s[23]=[e("i",{class:"fas fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Loading orders...",-1)])])):t.orders.length===0?(d(),i("div",fe,[s[25]||(s[25]=e("i",{class:"fas fa-shopping-bag text-4xl text-gray-400 mb-4"},null,-1)),s[26]||(s[26]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No orders yet",-1)),s[27]||(s[27]=e("p",{class:"text-gray-600 mb-6"},"Start shopping to see your orders here",-1)),q(y,{to:"/products",class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors"},{default:B(()=>[...s[24]||(s[24]=[m(" Start Shopping ",-1)])]),_:1})])):(d(),i("div",ye,[(d(!0),i(b,null,g(t.orders,r=>(d(),i("div",{key:r.id,class:"border border-gray-200 rounded-lg p-3 md:p-4 hover:shadow-md transition-shadow"},[e("div",he,[e("div",null,[e("h4",ve,"#"+l(r.order_number),1),e("p",_e,l(n.formatDate(r.created_at)),1)]),e("div",we,[e("p",Oe,"$"+l(r.total_amount),1),e("span",{class:u(["px-2 py-1 text-xs font-semibold rounded-full",n.getStatusClass(r.status)])},l(r.status.toUpperCase()),3)])]),e("div",ke,[e("button",{onClick:x=>n.viewOrderDetails(r),class:"text-blue-600 hover:text-blue-700 text-xs md:text-sm font-medium"}," View Details ",8,Ce),r.status==="delivered"?(d(),i("button",Se," Reorder ")):a("",!0)])]))),128))]))])):a("",!0),t.activeTab==="wishlist"?(d(),i("div",Te,[s[35]||(s[35]=e("h2",{class:"text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6"},"My Wishlist",-1)),t.wishlist.length===0?(d(),i("div",De,[s[30]||(s[30]=e("i",{class:"fas fa-heart text-4xl text-gray-400 mb-4"},null,-1)),s[31]||(s[31]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Your wishlist is empty",-1)),s[32]||(s[32]=e("p",{class:"text-gray-600 mb-6"},"Save items you love for later",-1)),q(y,{to:"/products",class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors"},{default:B(()=>[...s[29]||(s[29]=[m(" Browse Products ",-1)])]),_:1})])):(d(),i("div",Fe,[(d(!0),i(b,null,g(t.wishlist,r=>(d(),i("div",{key:r.id,class:"border border-gray-200 rounded-lg p-3 md:p-4 hover:shadow-md transition-shadow"},[e("img",{src:r.product.image,alt:r.product.name,class:"w-full h-40 md:h-48 object-cover rounded-lg mb-3 md:mb-4"},null,8,Me),e("h4",je,l(r.product.name),1),e("p",Pe,"$"+l(r.product.price),1),e("div",Ue,[s[34]||(s[34]=e("button",{class:"flex-1 px-3 md:px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors text-sm md:text-base"}," Add to Cart ",-1)),e("button",{onClick:x=>n.removeFromWishlist(r.id),class:"px-3 md:px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors"},[...s[33]||(s[33]=[e("i",{class:"fas fa-trash text-sm"},null,-1)])],8,Ae)])]))),128))]))])):a("",!0)])])]),t.showOrderModal?(d(),i("div",Ve,[e("div",Ne,[e("div",{class:"fixed inset-0 bg-black opacity-50",onClick:s[9]||(s[9]=(...r)=>n.closeOrderModal&&n.closeOrderModal(...r))}),e("div",Ee,[e("div",We,[s[37]||(s[37]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-900"},"Order Details",-1)),e("button",{onClick:s[10]||(s[10]=(...r)=>n.closeOrderModal&&n.closeOrderModal(...r)),class:"text-gray-400 hover:text-gray-600 p-2"},[...s[36]||(s[36]=[e("i",{class:"fas fa-times text-lg md:text-xl"},null,-1)])])]),t.selectedOrder?(d(),i("div",qe,[e("div",Be,[e("div",Ie,[e("div",null,[e("h4",Le,"#"+l(t.selectedOrder.order_number),1),e("p",ze,l(n.formatDate(t.selectedOrder.created_at)),1)]),e("div",Re,[e("span",{class:u(["px-3 py-1 text-sm font-semibold rounded-full",n.getStatusClass(t.selectedOrder.status)])},l(t.selectedOrder.status.toUpperCase()),3),e("p",He,"$"+l(t.selectedOrder.total_amount),1)])])]),e("div",Qe,[s[38]||(s[38]=e("h5",{class:"font-semibold text-gray-900 mb-3"},"Items Ordered",-1)),e("div",Ye,[(d(!0),i(b,null,g(t.selectedOrder.items,r=>{var x;return d(),i("div",{key:r.id,class:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg"},[e("img",{src:((x=r.product)==null?void 0:x.primary_image)||"https://via.placeholder.com/60x60",alt:r.product_name,class:"w-12 h-12 object-cover rounded-lg"},null,8,Ge),e("div",Je,[e("h6",Ke,l(r.product_name),1),e("p",Xe,"Qty: "+l(r.quantity),1)]),e("div",Ze,[e("p",$e,"$"+l(r.total),1),e("p",es,"$"+l(r.price)+" each",1)])])}),128))])]),e("div",ss,[s[40]||(s[40]=e("h5",{class:"font-semibold text-gray-900 mb-3"},"Shipping Address",-1)),e("div",ts,[e("p",rs,l((T=t.selectedOrder.shipping_address)==null?void 0:T.first_name)+" "+l((D=t.selectedOrder.shipping_address)==null?void 0:D.last_name),1),e("p",null,l((F=t.selectedOrder.shipping_address)==null?void 0:F.address_line_1),1),(M=t.selectedOrder.shipping_address)!=null&&M.address_line_2?(d(),i("p",ls,l((j=t.selectedOrder.shipping_address)==null?void 0:j.address_line_2),1)):a("",!0),e("p",null,l((P=t.selectedOrder.shipping_address)==null?void 0:P.city)+", "+l((U=t.selectedOrder.shipping_address)==null?void 0:U.state)+" "+l((A=t.selectedOrder.shipping_address)==null?void 0:A.postal_code),1),e("p",null,l((V=t.selectedOrder.shipping_address)==null?void 0:V.country),1),e("p",os,[s[39]||(s[39]=e("strong",null,"Phone:",-1)),m(" "+l((N=t.selectedOrder.shipping_address)==null?void 0:N.phone),1)])])]),e("div",ds,[s[46]||(s[46]=e("h5",{class:"font-semibold text-gray-900 mb-3"},"Order Summary",-1)),e("div",is,[e("div",ns,[s[41]||(s[41]=e("span",null,"Subtotal:",-1)),e("span",null,"$"+l(t.selectedOrder.subtotal),1)]),e("div",as,[s[42]||(s[42]=e("span",null,"Tax:",-1)),e("span",null,"$"+l(t.selectedOrder.tax_amount),1)]),e("div",us,[s[43]||(s[43]=e("span",null,"Shipping:",-1)),e("span",null,"$"+l(t.selectedOrder.shipping_amount),1)]),t.selectedOrder.discount_amount>0?(d(),i("div",cs,[s[44]||(s[44]=e("span",null,"Discount:",-1)),e("span",null,"-$"+l(t.selectedOrder.discount_amount),1)])):a("",!0),e("div",ms,[s[45]||(s[45]=e("span",null,"Total:",-1)),e("span",null,"$"+l(t.selectedOrder.total_amount),1)])])]),e("div",xs,[t.selectedOrder.status==="pending"||t.selectedOrder.status==="confirmed"?(d(),i("button",{key:0,onClick:s[11]||(s[11]=r=>n.cancelOrder(t.selectedOrder)),class:"px-4 md:px-6 py-2 md:py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors text-sm md:text-base"},[...s[47]||(s[47]=[e("i",{class:"fas fa-times mr-2"},null,-1),m("Cancel Order ",-1)])])):a("",!0),t.selectedOrder.status==="delivered"?(d(),i("button",ps,[...s[48]||(s[48]=[e("i",{class:"fas fa-redo mr-2"},null,-1),m("Reorder ",-1)])])):a("",!0),e("button",{onClick:s[12]||(s[12]=(...r)=>n.closeOrderModal&&n.closeOrderModal(...r)),class:"px-4 md:px-6 py-2 md:py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-sm md:text-base"}," Close ")])])):a("",!0)])])])):a("",!0)])}const ys=I(Q,[["render",bs]]);export{ys as default};
