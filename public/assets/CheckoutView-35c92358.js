import{_ as q,p as S,k as U,q as h,s as C,x as w,y as O,z as P,o as a,c as u,b as s,i as o,v as t,A as F,l as A,m as k,B as V,F as B,h as N,t as i,d as j,C as L}from"./index-2221eb74.js";const D={name:"CheckoutView",setup(){const b=S(),e=U(),y=h(),r=C(),m=w(!1),g=w(!0),l=O({billing_address:{first_name:"",last_name:"",email:"",phone:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:""},shipping_address:{first_name:"",last_name:"",phone:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:""},payment_method:"cod",notes:""});return P(g,p=>{p&&(l.shipping_address={...l.billing_address})}),{cartStore:e,form:l,sameAsBilling:g,loading:m,placeOrder:async()=>{var x,c,_,v;if(!y.isAuthenticated){r.error("Authentication Required","Please login to place order"),b.push("/login");return}if(e.items.length===0){r.error("Cart Empty","Your cart is empty");return}const p=["first_name","last_name","email","phone","address_line_1","city","state","postal_code","country"];for(const d of p)if(!l.billing_address[d]){r.error("Missing Information",`Please fill in ${d.replace("_"," ")}`);return}if(!l.payment_method){r.error("Payment Method Required","Please select a payment method");return}m.value=!0;try{g.value&&(l.shipping_address={...l.billing_address});const d={...l,cart_items:e.items.map(f=>({product_id:f.product_id,variant_id:f.variant_id||null,quantity:f.quantity}))},n=await L.post("/checkout",d);n.data.success?(r.success("Order Placed Successfully!",`Order Number: ${n.data.order.order_number}`),e.clearCart(),b.push("/orders")):r.error("Order Failed",n.data.message||"Failed to place order")}catch(d){let n="Failed to place order";(c=(x=d.response)==null?void 0:x.data)!=null&&c.message?n=d.response.data.message:(v=(_=d.response)==null?void 0:_.data)!=null&&v.errors&&(n=Object.values(d.response.data.errors).flat()[0]||n),r.error("Order Failed",n)}finally{m.value=!1}}}}},M={class:"min-h-screen bg-gray-50"},T={class:"max-w-7xl mx-auto px-4 py-8"},R={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},E={class:"space-y-6"},I={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},z={class:"space-y-4"},Q={class:"grid grid-cols-2 gap-4"},Y={class:"grid grid-cols-3 gap-4"},G={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},H={class:"flex items-center justify-between mb-4"},J={class:"flex items-center"},K={key:0,class:"space-y-4"},W={class:"grid grid-cols-2 gap-4"},X={class:"grid grid-cols-3 gap-4"},Z={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},$={class:"space-y-3"},ee={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},se={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 h-fit"},re={class:"space-y-4 mb-6"},le=["src","alt"],oe={class:"flex-1"},te={class:"font-medium text-gray-900"},de={class:"text-sm text-gray-600"},ne={class:"font-semibold"},ie={class:"space-y-3 mb-6 pt-4 border-t"},ae={class:"flex justify-between"},ue={class:"font-semibold"},me={class:"flex justify-between"},ge={class:"font-semibold"},fe={class:"flex justify-between"},be={class:"font-semibold"},pe={class:"border-t pt-3"},ye={class:"flex justify-between text-lg font-bold"},xe=["disabled"],ce={key:0,class:"fas fa-spinner fa-spin mr-2"},_e={key:1,class:"fas fa-money-bill-wave mr-2"},ve={key:2,class:"fas fa-credit-card mr-2"};function we(b,e,y,r,m,g){return a(),u("div",M,[s("div",T,[e[55]||(e[55]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"Checkout",-1)),s("div",R,[s("div",E,[s("div",I,[e[34]||(e[34]=s("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Billing Information",-1)),s("form",z,[s("div",Q,[s("div",null,[e[24]||(e[24]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"First Name *",-1)),o(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.form.billing_address.first_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.first_name]])]),s("div",null,[e[25]||(e[25]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Name *",-1)),o(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>r.form.billing_address.last_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.last_name]])])]),s("div",null,[e[26]||(e[26]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email *",-1)),o(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>r.form.billing_address.email=l),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.email]])]),s("div",null,[e[27]||(e[27]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone *",-1)),o(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r.form.billing_address.phone=l),type:"tel",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.phone]])]),s("div",null,[e[28]||(e[28]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 1 *",-1)),o(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r.form.billing_address.address_line_1=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.address_line_1]])]),s("div",null,[e[29]||(e[29]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 2",-1)),o(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>r.form.billing_address.address_line_2=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.address_line_2]])]),s("div",Y,[s("div",null,[e[30]||(e[30]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"City *",-1)),o(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>r.form.billing_address.city=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.city]])]),s("div",null,[e[31]||(e[31]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"State *",-1)),o(s("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>r.form.billing_address.state=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.state]])]),s("div",null,[e[32]||(e[32]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Postal Code *",-1)),o(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>r.form.billing_address.postal_code=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.postal_code]])])]),s("div",null,[e[33]||(e[33]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Country *",-1)),o(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>r.form.billing_address.country=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.billing_address.country]])])])]),s("div",G,[s("div",H,[e[36]||(e[36]=s("h3",{class:"text-lg font-bold text-gray-900"},"Shipping Information",-1)),s("label",J,[o(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>r.sameAsBilling=l),type:"checkbox",class:"mr-2"},null,512),[[F,r.sameAsBilling]]),e[35]||(e[35]=s("span",{class:"text-sm text-gray-600"},"Same as billing",-1))])]),r.sameAsBilling?A("",!0):(a(),u("form",K,[s("div",W,[s("div",null,[e[37]||(e[37]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"First Name *",-1)),o(s("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>r.form.shipping_address.first_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.first_name]])]),s("div",null,[e[38]||(e[38]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Name *",-1)),o(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>r.form.shipping_address.last_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.last_name]])])]),s("div",null,[e[39]||(e[39]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone *",-1)),o(s("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>r.form.shipping_address.phone=l),type:"tel",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.phone]])]),s("div",null,[e[40]||(e[40]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 1 *",-1)),o(s("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>r.form.shipping_address.address_line_1=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.address_line_1]])]),s("div",null,[e[41]||(e[41]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 2",-1)),o(s("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>r.form.shipping_address.address_line_2=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.address_line_2]])]),s("div",X,[s("div",null,[e[42]||(e[42]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"City *",-1)),o(s("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>r.form.shipping_address.city=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.city]])]),s("div",null,[e[43]||(e[43]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"State *",-1)),o(s("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>r.form.shipping_address.state=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.state]])]),s("div",null,[e[44]||(e[44]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Postal Code *",-1)),o(s("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>r.form.shipping_address.postal_code=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.postal_code]])])]),s("div",null,[e[45]||(e[45]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Country *",-1)),o(s("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>r.form.shipping_address.country=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[t,r.form.shipping_address.country]])])]))]),s("div",Z,[e[48]||(e[48]=s("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Payment Method",-1)),s("div",$,[s("label",{class:k(["flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",r.form.payment_method==="cod"?"border-blue-500 bg-blue-50":"border-gray-300"])},[o(s("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>r.form.payment_method=l),type:"radio",value:"cod",class:"mr-3"},null,512),[[V,r.form.payment_method]]),e[46]||(e[46]=s("div",{class:"flex items-center"},[s("i",{class:"fas fa-money-bill-wave text-green-600 mr-3"}),s("div",null,[s("div",{class:"font-medium"},"Cash on Delivery"),s("div",{class:"text-sm text-gray-600"},"Pay when you receive your order")])],-1))],2),s("label",{class:k(["flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",r.form.payment_method==="stripe"?"border-blue-500 bg-blue-50":"border-gray-300"])},[o(s("input",{"onUpdate:modelValue":e[21]||(e[21]=l=>r.form.payment_method=l),type:"radio",value:"stripe",class:"mr-3"},null,512),[[V,r.form.payment_method]]),e[47]||(e[47]=s("div",{class:"flex items-center"},[s("i",{class:"fas fa-credit-card text-blue-600 mr-3"}),s("div",null,[s("div",{class:"font-medium"},"Credit/Debit Card"),s("div",{class:"text-sm text-gray-600"},"Pay securely with Stripe")])],-1))],2)])]),s("div",ee,[e[49]||(e[49]=s("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Order Notes (Optional)",-1)),o(s("textarea",{"onUpdate:modelValue":e[22]||(e[22]=l=>r.form.notes=l),placeholder:"Any special instructions for your order...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"},null,512),[[t,r.form.notes]])])]),s("div",se,[e[54]||(e[54]=s("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Order Summary",-1)),s("div",re,[(a(!0),u(B,null,N(r.cartStore.items,l=>(a(),u("div",{key:l.id,class:"flex items-center space-x-3"},[s("img",{src:l.image||"https://via.placeholder.com/60x60",alt:l.name,class:"w-12 h-12 object-cover rounded-lg"},null,8,le),s("div",oe,[s("h4",te,i(l.name),1),s("p",de,"Qty: "+i(l.quantity),1)]),s("span",ne,"$"+i((l.price*l.quantity).toFixed(2)),1)]))),128))]),s("div",ie,[s("div",ae,[e[50]||(e[50]=s("span",{class:"text-gray-600"},"Subtotal",-1)),s("span",ue,"$"+i(r.cartStore.total.toFixed(2)),1)]),s("div",me,[e[51]||(e[51]=s("span",{class:"text-gray-600"},"Shipping",-1)),s("span",ge,i(r.cartStore.total>100?"Free":"$10.00"),1)]),s("div",fe,[e[52]||(e[52]=s("span",{class:"text-gray-600"},"Tax",-1)),s("span",be,"$"+i((r.cartStore.total*.1).toFixed(2)),1)]),s("div",pe,[s("div",ye,[e[53]||(e[53]=s("span",null,"Total",-1)),s("span",null,"$"+i((r.cartStore.total+(r.cartStore.total>100?0:10)+r.cartStore.total*.1).toFixed(2)),1)])])]),s("button",{onClick:e[23]||(e[23]=(...l)=>r.placeOrder&&r.placeOrder(...l)),disabled:r.loading,class:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-6 rounded-xl font-bold hover:from-green-700 hover:to-emerald-700 transition-all transform hover:scale-105 shadow-lg disabled:opacity-50"},[r.loading?(a(),u("i",ce)):r.form.payment_method==="cod"?(a(),u("i",_e)):(a(),u("i",ve)),j(" "+i(r.loading?"Processing...":r.form.payment_method==="cod"?"Place Order (COD)":"Place Order"),1)],8,xe)])])])])}const qe=q(D,[["render",we]]);export{qe as default};
