import{L as _}from"./LoadingSkeleton-bfc654c3.js";import{u as v}from"./orders-9f5f7292.js";import{h as w}from"./errorHandler-83e4d49a.js";import{_ as k,r as p,o,c as n,b as e,g as S,F as O,h as C,e as x,w as y,t as a,m as D,d as b,l as f}from"./index-2221eb74.js";const V={name:"OrdersView",components:{LoadingSkeleton:_},data(){return{orders:[],loading:!0}},setup(){return{orderStore:v()}},async created(){await this.loadOrders()},methods:{async loadOrders(){this.loading=!0;try{this.orders=await this.orderStore.fetchOrders()}catch(r){w(r)}finally{this.loading=!1}},formatDate(r){return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},getStatusClass(r){return{pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",confirmed:"bg-green-100 text-green-800"}[r]||"bg-gray-100 text-gray-800"},async cancelOrder(r){if(confirm(`Are you sure you want to cancel order #${r.order_number}?`))try{await this.orderStore.cancelOrder(r.order_number);const t=this.orders.findIndex(i=>i.id===r.id);t!==-1&&(this.orders[t].status="cancelled"),alert("Order cancelled successfully!")}catch(t){console.error("Error cancelling order:",t),alert("Failed to cancel order. Please try again.")}}}},L={class:"min-h-screen bg-gray-50"},N={class:"max-w-7xl mx-auto px-4 py-8"},A={key:1,class:"space-y-6"},B={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-4"},E={class:"text-lg font-semibold text-gray-900"},F={class:"text-gray-600"},I={class:"flex items-center space-x-4 mt-4 md:mt-0"},U={class:"text-lg font-bold text-gray-900"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},M={class:"font-medium"},P={class:"font-medium"},T={class:"font-medium"},$={class:"flex justify-between items-center pt-4 border-t border-gray-200"},z={class:"space-x-2"},R=["onClick"],q={key:1,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},G={key:2,class:"text-center py-16"},H={class:"text-gray-500"};function J(r,t,i,K,l,d){const h=p("LoadingSkeleton"),c=p("router-link");return o(),n("div",L,[e("div",N,[t[8]||(t[8]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"My Orders"),e("p",{class:"text-gray-600"},"Track and manage your orders")],-1)),l.loading?(o(),S(h,{key:0})):l.orders.length>0?(o(),n("div",A,[(o(!0),n(O,null,C(l.orders,s=>{var m,u,g;return o(),n("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},[e("div",B,[e("div",null,[e("h3",E,"Order #"+a(s.order_number),1),e("p",F,a(d.formatDate(s.created_at)),1)]),e("div",I,[e("span",{class:D([d.getStatusClass(s.status),"px-3 py-1 rounded-full text-sm font-medium"])},a(s.status.toUpperCase()),3),e("span",U,"$"+a(s.total),1)])]),e("div",j,[e("div",null,[t[0]||(t[0]=e("p",{class:"text-sm text-gray-500"},"Payment Method",-1)),e("p",M,a(((m=s.payment_method)==null?void 0:m.toUpperCase())||"COD"),1)]),e("div",null,[t[1]||(t[1]=e("p",{class:"text-sm text-gray-500"},"Items",-1)),e("p",P,a(((u=s.items)==null?void 0:u.length)||0)+" items",1)]),e("div",null,[t[2]||(t[2]=e("p",{class:"text-sm text-gray-500"},"Delivery Address",-1)),e("p",T,a(((g=s.shipping_address)==null?void 0:g.city)||"N/A"),1)])]),e("div",$,[x(c,{to:`/orders/${s.order_number}`,class:"text-blue-600 hover:text-blue-700 font-medium"},{default:y(()=>[...t[3]||(t[3]=[b(" View Details ",-1)])]),_:1},8,["to"]),e("div",z,[s.status==="pending"||s.status==="confirmed"?(o(),n("button",{key:0,onClick:Q=>d.cancelOrder(s),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Cancel Order ",8,R)):f("",!0),s.status==="delivered"?(o(),n("button",q," Reorder ")):f("",!0)])])])}),128))])):(o(),n("div",G,[e("div",H,[t[5]||(t[5]=e("i",{class:"fas fa-shopping-bag text-4xl mb-4"},null,-1)),t[6]||(t[6]=e("h3",{class:"text-lg font-semibold mb-2"},"No orders yet",-1)),t[7]||(t[7]=e("p",{class:"mb-6"},"Start shopping to see your orders here",-1)),x(c,{to:"/products",class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors"},{default:y(()=>[...t[4]||(t[4]=[b(" Start Shopping ",-1)])]),_:1})])]))])])}const ee=k(V,[["render",J]]);export{ee as default};
