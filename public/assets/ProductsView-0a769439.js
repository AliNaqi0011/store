import{P as b}from"./ProductCard-3d593eee.js";import{L as v}from"./LoadingSkeleton-bfc654c3.js";import{_,u as w,r as m,o as i,c as l,b as o,i as n,v as S,j as g,F as c,h as u,f as k,t as f,e as C,g as P}from"./index-2221eb74.js";import{s as p}from"./errorHandler-83e4d49a.js";const F={name:"ProductsView",components:{ProductCard:b,LoadingSkeleton:v},data(){return{products:[],categories:[],loading:!0,filters:{search:"",category:"",sort:"created_at"}}},setup(){return{productStore:w()}},async created(){await this.loadData()},methods:{async loadData(){var r;this.loading=!0;try{const[e,a]=await Promise.all([this.productStore.fetchProducts(this.filters),this.productStore.fetchCategories()]);this.products=((r=e.data)==null?void 0:r.data)||[],this.categories=a}catch{p("Failed to load products","error")}finally{this.loading=!1}},debouncedSearch:T(function(){this.applyFilters()},500),async applyFilters(){var r;this.loading=!0;try{const e=await this.productStore.fetchProducts(this.filters);this.products=((r=e.data)==null?void 0:r.data)||[]}catch{p("Failed to filter products","error")}finally{this.loading=!1}},onAddedToCart(r){p(`${r.name} added to cart!`,"success")}}};function T(r,e){let a;return function(...s){const d=()=>{clearTimeout(a),r(...s)};clearTimeout(a),a=setTimeout(d,e)}}const V={class:"min-h-screen bg-gray-50"},L={class:"max-w-7xl mx-auto px-4 py-4 md:py-8"},N={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 md:p-6 mb-4 md:mb-8"},A={class:"grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4"},B={class:"md:col-span-2"},D=["value"],j={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-8"},H={key:1},R={class:"flex justify-between items-center mb-4 md:mb-6"},U={class:"text-gray-600 text-sm md:text-base"},M={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-8"},E={key:2,class:"text-center py-8 md:py-16"};function I(r,e,a,y,s,d){const h=m("LoadingSkeleton"),x=m("ProductCard");return i(),l("div",V,[o("div",L,[o("div",N,[o("div",A,[o("div",B,[n(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.filters.search=t),onInput:e[1]||(e[1]=(...t)=>d.debouncedSearch&&d.debouncedSearch(...t)),type:"text",placeholder:"Search products...",class:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"},null,544),[[S,s.filters.search]])]),o("div",null,[n(o("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.filters.category=t),onChange:e[3]||(e[3]=(...t)=>d.applyFilters&&d.applyFilters(...t)),class:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"},[e[6]||(e[6]=o("option",{value:""},"All Categories",-1)),(i(!0),l(c,null,u(s.categories,t=>(i(),l("option",{key:t.id,value:t.slug},f(t.name),9,D))),128))],544),[[g,s.filters.category]])]),o("div",null,[n(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.filters.sort=t),onChange:e[5]||(e[5]=(...t)=>d.applyFilters&&d.applyFilters(...t)),class:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"},[...e[7]||(e[7]=[k('<option value="created_at">Newest</option><option value="price_low">Price: Low to High</option><option value="price_high">Price: High to Low</option><option value="name">Name A-Z</option><option value="rating">Highest Rated</option>',5)])],544),[[g,s.filters.sort]])])])]),s.loading?(i(),l("div",j,[(i(),l(c,null,u(8,t=>C(h,{key:t,type:"product-card"})),64))])):s.products.length>0?(i(),l("div",H,[o("div",R,[o("p",U,f(s.products.length)+" products found",1)]),o("div",M,[(i(!0),l(c,null,u(s.products,t=>(i(),P(x,{key:t.id,product:t,onAddedToCart:d.onAddedToCart},null,8,["product","onAddedToCart"]))),128))])])):(i(),l("div",E,[...e[8]||(e[8]=[o("div",{class:"text-gray-500"},[o("i",{class:"fas fa-search text-2xl md:text-4xl mb-2 md:mb-4"}),o("h3",{class:"text-base md:text-lg font-semibold mb-1 md:mb-2"},"No products found"),o("p",{class:"text-sm md:text-base"},"Try adjusting your search or filters")],-1)])]))])])}const J=_(F,[["render",I]]);export{J as default};
